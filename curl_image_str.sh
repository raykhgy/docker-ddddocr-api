#!/bin/bash

# 定義變數
CAPTCHA_URL="data:image/png;base64,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"
OCR_API="http://localhost:9999/ocr_image_str"

# 處理 Base64 數據
echo "處理 Base64 驗證碼圖片..."
# 提取 Base64 數據（移除 data:image/png;base64, 前綴）
BASE64_DATA=$(echo "$CAPTCHA_URL" | sed 's/^data:image\/png;base64,//')

# 檢查 Base64 數據是否有效
if [ -z "$BASE64_DATA" ]; then
    echo "錯誤：無效的 Base64 數據"
    exit 1
fi

# 發送 JSON 請求到 OCR API
echo "發送 Base64 數據給 OCR API..."
curl -X POST -H "Content-Type: application/json" \
     -d "{\"image\":\"$BASE64_DATA\"}" \
     "$OCR_API"

echo "請求完成"